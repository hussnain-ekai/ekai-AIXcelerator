# =============================================================================
# ekaiX AIXcelerator - Unified Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# This is the SINGLE source of truth for all environment variables.
# All services (frontend, backend, ai-service) load from this file.
# DO NOT create separate .env files in service directories.
# =============================================================================

# -----------------------------------------------------------------------------
# Service Ports
# -----------------------------------------------------------------------------
FRONTEND_PORT=3000
BACKEND_PORT=8000
AI_SERVICE_PORT=8001

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=development

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins for CORS
ALLOWED_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# Frontend URLs (NEXT_PUBLIC_* are exposed to browser)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Internal Service URLs
# -----------------------------------------------------------------------------
AI_SERVICE_URL=http://localhost:8001

# -----------------------------------------------------------------------------
# PostgreSQL
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://ekaix:ekaix_dev_password@localhost:5432/ekaix
POSTGRES_PASSWORD=ekaix_dev_password

# -----------------------------------------------------------------------------
# Neo4j
# -----------------------------------------------------------------------------
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=ekaix_dev_password

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://:ekaix_dev_password@localhost:6379
REDIS_PASSWORD=ekaix_dev_password

# -----------------------------------------------------------------------------
# MinIO (Object Storage)
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=ekaix
MINIO_SECRET_KEY=ekaix_dev_password
MINIO_USE_SSL=false
MINIO_ROOT_USER=ekaix
MINIO_ROOT_PASSWORD=ekaix_dev_password

# -----------------------------------------------------------------------------
# Snowflake
# -----------------------------------------------------------------------------
# IMPORTANT: Load password from sf.txt file, not hardcoded here
SNOWFLAKE_ACCOUNT=your_account.region
SNOWFLAKE_USER=your_user
SNOWFLAKE_PASSWORD=
SNOWFLAKE_WAREHOUSE=your_warehouse
SNOWFLAKE_DATABASE=
SNOWFLAKE_ROLE=your_role

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------
# LLM provider and model selection is configured via the UI only.
# Navigate to /llm-configuration to set up your preferred provider.
# Supported providers: vertex-ai, snowflake-cortex, azure-openai, anthropic, openai
#
# For Vertex AI: Set GOOGLE_APPLICATION_CREDENTIALS in your shell profile
# pointing to your service account JSON file.

# -----------------------------------------------------------------------------
# Langfuse (LLM Tracing)
# -----------------------------------------------------------------------------
LANGFUSE_SECRET_KEY=
LANGFUSE_PUBLIC_KEY=
LANGFUSE_BASE_URL=

# -----------------------------------------------------------------------------
# LangChain/LangSmith (Alternative Tracing - Optional)
# -----------------------------------------------------------------------------
LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=ekaix

# -----------------------------------------------------------------------------
# Connection Tuning (Optional)
# -----------------------------------------------------------------------------
PG_IDLE_TIMEOUT_MS=30000

# -----------------------------------------------------------------------------
# Frontend SSE Configuration (NEXT_PUBLIC_ required for browser access)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_SSE_MAX_RETRIES=5
NEXT_PUBLIC_SSE_BASE_DELAY_MS=1000

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------
LLM_MAX_TOKENS=64000
LLM_TEMPERATURE=0.1
LLM_TEST_TIMEOUT=15.0
LLM_TEST_MAX_TOKENS=200

# -----------------------------------------------------------------------------
# LiteLLM Router Settings (Automatic Failover)
# -----------------------------------------------------------------------------
# Enable LiteLLM Router for production-grade automatic failover between LLM providers.
# When enabled, the router handles retries, cooldowns, and provider switching automatically.
# Configure primary + fallback providers via the UI at /llm-configuration.
LITELLM_ENABLE=true
LITELLM_ALLOWED_FAILS=3      # Number of failures before provider cooldown
LITELLM_COOLDOWN_TIME=60     # Cooldown duration in seconds
LITELLM_NUM_RETRIES=2        # Retry attempts per provider

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
AGENT_RECURSION_LIMIT=150
AGENT_STREAM_TIMEOUT=15.0
DISCOVERY_MAX_COLUMNS_PER_TABLE=15
MAX_REQUIREMENTS_TURNS=15

# -----------------------------------------------------------------------------
# Data Quality Scoring (for discovery phase)
# -----------------------------------------------------------------------------
PK_UNIQUENESS_THRESHOLD=0.98
DEDUCTION_DUPLICATE_PK=15
DEDUCTION_ORPHANED_FK=10
DEDUCTION_NUMERIC_VARCHAR=5
DEDUCTION_MISSING_DESCRIPTION=2

# -----------------------------------------------------------------------------
# MinIO Buckets
# -----------------------------------------------------------------------------
MINIO_ARTIFACTS_BUCKET=artifacts
MINIO_DOCUMENTS_BUCKET=documents

# -----------------------------------------------------------------------------
# Session & Cache TTLs (seconds)
# -----------------------------------------------------------------------------
SESSION_TTL_SECONDS=3600
CACHE_TTL_SECONDS=3600

# -----------------------------------------------------------------------------
# Snowflake Timeouts (seconds)
# -----------------------------------------------------------------------------
SNOWFLAKE_LOGIN_TIMEOUT=30
SNOWFLAKE_NETWORK_TIMEOUT=60

# -----------------------------------------------------------------------------
# Query Limits
# -----------------------------------------------------------------------------
RCR_QUERY_ROW_LIMIT=1000
TOOL_OUTPUT_TRUNCATE_LENGTH=2000
